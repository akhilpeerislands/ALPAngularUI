<div class="grid p-fluid">
	<p-dialog header="Scheduled Information" [(visible)]="display" [modal]="true" showEffect="fade" [style]="{width: '50vw'}" [breakpoints]="{'960px': '80vw'}">
		<div class="col-12 md:col-12">
			<h5>Choosen BT</h5> 
			<div class="grid formgrid">
				<div class="font-bold field col-12 mb-2 lg:col-12 lg:mb-0 ">
					<input type="text" [(ngModel)]="selectedPopUpBT" pInputText placeholder="Default" [disabled]="true">
				</div>	
			</div>
			<h5>Choosen Meeting Type</h5>
			<div class="grid formgrid">
				<div class="field col-12 mb-2 lg:col-12 lg:mb-0">
					<input type="text" [(ngModel)]="selectedPopUpAppointmentType" pInputText placeholder="Default" [disabled]="true">
				</div>
			</div>
			<br>

			<div class="card">
				<h5>Schedule Meeting On</h5>
				<p-calendar [(ngModel)]="selectedPopUpDate" [showIcon]="true" inputId="icon"></p-calendar>
	
				<h5>Choose Start and End Time:</h5>
	
				<div class="grid formgrid">
					<div class="col-12 md:col-6">
						<div class="field">
							<h6>Start Time</h6>
						<p-calendar [timeOnly]="true" hourFormat = "12" [(ngModel)]="selectedPopUpStartTime" (onSelect)="compareTwoTimesM();checkPopupValidations()" placeholder="hh:mm">
							<ng-template class="align-self-center" pTemplate="footer">Choose local time</ng-template>
						</p-calendar>
					</div>
					</div>
					<div class="col-12 md:col-6">
						<div class="field">
							<h6>End Time</h6>
						<p-calendar [timeOnly]="true"  hourFormat = "12" [(ngModel)]="selectedPopUpEndTime" (onSelect)="compareTwoTimesM();checkPopupValidations()" placeholder="hh:mm">
							<ng-template pTemplate="footer">Choose local time</ng-template>
						</p-calendar>
					</div>
					</div>
					<div *ngIf="invalidPopupDate" class="col-12 md:col-12">
						<div>
							<p-message severity="error" text="End Time should be greater than Start Time">
							</p-message>
						</div>
					</div>
				</div>
				<h5>Appointment With</h5>
				<div class="grid formgrid">
					<div class="field col-12 mb-2 lg:col-12 lg:mb-0">
						<p-dropdown [options]="supervisionClients" [(ngModel)]="selectedPopUpAppointmentWith" placeholder={{selectedPopUpAppointmentWith.label}} [filter]="true" filterBy="label" (onSelect)= "checkPopupValidations()" [showClear]="true"></p-dropdown>
					</div>	
				</div>
	
				
				<br>
				<div class="formgroup-inline">
					<button pButton label="Update" disabled="disableUpdate" (click)="updateMeeting()"></button>
				</div>
	
			</div>
		</div>
		<!-- <ng-template pTemplate="footer">
				<button pButton icon="pi pi-check" (click)="display=false" label="Ok" class="p-button-outlined"></button>
		</ng-template> -->
	</p-dialog>
	<div class="col-12 md:col-6">
		<div class="card">
			<h5>Select Meeting Type</h5>
			<div class="grid formgrid">
				<div class="field col-12 mb-2 lg:col-12 lg:mb-0">
					<p-dropdown [options]="masterMeetings"  [(ngModel)]="selectedMeeting" (onChange) = "onMeetingsChanged()" placeholder="Choose a Meeting" [showClear]="true" ></p-dropdown>
				</div>	
			</div>
			<h5>Schedule Meeting On</h5>
			<p-calendar [(ngModel)]="selectedDate" [showIcon]="true" inputId="icon"></p-calendar>
			<h5>Choose Start and End Time:</h5>
			<div class="grid formgrid">
				<div class="col-12 md:col-6">
					<div class="field">
						<h6>Start Time</h6>
					<p-calendar [timeOnly]="true" hourFormat = "12" [(ngModel)]="startTime" (onSelect)="compareTwoTimesM();checkValidations()" placeholder="hh:mm">
						<ng-template class="align-self-center" pTemplate="footer">Choose local time</ng-template>
					</p-calendar>
				</div>
				</div>
				<div class="col-12 md:col-6">
					<div class="field">
						<h6>End Time</h6>
					<p-calendar [timeOnly]="true"  hourFormat = "12" [(ngModel)]="endTime" (onSelect)="compareTwoTimesM();checkValidations()" placeholder="hh:mm">
						<ng-template pTemplate="footer">Choose local time</ng-template>
					</p-calendar>
				</div>
				</div>
				<div *ngIf="invalidDate" class="col-12 md:col-12">
					<div>
						<p-message severity="error" text="End Time should be greater than Start Time">
						</p-message>
					</div>
				</div>
			</div>
			<h5>Appointment With</h5>
			<div class="grid formgrid">
				<div class="field col-12 mb-2 lg:col-12 lg:mb-0">
					<p-dropdown [options]="supervisionClients" [(ngModel)]="selectedClient" placeholder="Choose Supervision Client" [filter]="true" filterBy="label" [showClear]="true"></p-dropdown>
				</div>	
			</div>

			<h5>Select BT</h5>
			<p-multiSelect [options]="BTs" [(ngModel)]="selectedMultiBT" placeholder="Select a BT" optionLabel="btName" class="multiselect-custom" display="chip">
				<ng-template let-country pTemplate="item">
					<div class="flex align-items-center">
						<!-- <img src="assets/demo/images/flag/flag_placeholder.png" [class]="'flag flag-' + country.code.toLowerCase()" style="width:21px"/> -->
						<span class="ml-2">{{country.btName}}</span>
					</div>
				</ng-template>
			</p-multiSelect>
			<br>
			<div class="formgroup-inline">
				<button pButton label="Schedule" (click)="saveMeeting()" [disabled]="disableSubmit"></button>
			</div>

		</div>
	</div>
	<div class="col-12 md:col-6">
		<div class="card">
			<h5>Scheduled Meetings</h5>
			<p-dataView #dv [value]="scheduledMeetings" [paginator]="true" [rows]="3" filterBy="btName" [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">
				<ng-template pTemplate="header">
					<div class="flex flex-column md:flex-row md:justify-content-between gap-2">
						<!-- <p-dropdown [options]="sortOptions" placeholder="Sort By Name" (onChange)="onSortChange($event)"></p-dropdown> -->
						<span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input type="search" pInputText placeholder="Search by Name" (input)="onFilter(dv, $event)">
                        </span>	
					</div>
				</ng-template>

				
				<ng-template let-product pTemplate="gridItem">
					<div class="col-12">
						<div class="flex flex-column md:flex-row  p-3 w-full">
							<!-- <img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name" class="my-4 md:my-0 w-9 md:w-10rem shadow-2 mr-5"/> -->
							<div class="flex-1 flex flex-column  text-center md:text-left">
								<div class="font-bold text-2xl">{{product.btName}}</div>
								<div class="mb-2">{{product.description}}</div>
								<div class="text-xl">{{product.appointmentType}}</div>
								<!-- <p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false" styleClass="mb-2"></p-rating> -->
								<div class="flex  mt-2">
									<span class="font-semibold">Appointment With: {{product.appointmentWith}}</span>
								</div>
								<div class="flex  mt-2">
									<span class="font-semibold">Start Time: {{product.startTime}} End Time: {{product.endTime}}</span>
								</div>
							</div>
							<div class="flex flex-row md:flex-column justify-content-between w-full md:w-auto align-items-center md:align-items-end mt-5 md:mt-0">
								<span class="text-xl font-semibold mb-2 align-self-center md:align-self-end">{{product.date}}</span>
								<p-button icon="pi pi-search" label="" styleClass="mb-2 p-button-sm" (onClick)="showPopUp(product)"></p-button>
								<!-- <span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span> -->
							</div>
						</div>
					</div>
				</ng-template>
			</p-dataView>
		</div>
	</div>

	
</div>
